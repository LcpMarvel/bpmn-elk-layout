<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="definitions_collab_msgflows" targetNamespace="http://example.com/test-collab-msgflows" exporter="ELK-BPMN Test Generator" exporterVersion="1.0">
  <bpmn:message id="msg_request" name="请求消息" />
  <bpmn:message id="msg_response" name="响应消息" />
  <bpmn:collaboration id="collaboration_1" name="消息交互">
    <bpmn:participant id="pool_client" name="客户端" processRef="process_client" />
    <bpmn:participant id="pool_server" name="服务端" processRef="process_server" />
    <bpmn:messageFlow id="msgflow_request" name="请求" sourceRef="task_send_req" targetRef="start_server" messageRef="msg_request" />
    <bpmn:messageFlow id="msgflow_response" name="响应" sourceRef="throw_response" targetRef="catch_response" messageRef="msg_response" />
  </bpmn:collaboration>
  <bpmn:process id="process_client" name="客户端" isExecutable="true">
    <bpmn:startEvent id="start_client" name="开始">
      <bpmn:outgoing>flow_c1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sendTask id="task_send_req" name="发送请求">
      <bpmn:incoming>flow_c1</bpmn:incoming>
      <bpmn:outgoing>flow_c2</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:intermediateCatchEvent id="catch_response" name="等待响应">
      <bpmn:incoming>flow_c2</bpmn:incoming>
      <bpmn:outgoing>flow_c3</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="msg_response" />
    </bpmn:intermediateCatchEvent>
    <bpmn:endEvent id="end_client" name="结束">
      <bpmn:incoming>flow_c3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="flow_c1" sourceRef="start_client" targetRef="task_send_req" />
    <bpmn:sequenceFlow id="flow_c2" sourceRef="task_send_req" targetRef="catch_response" />
    <bpmn:sequenceFlow id="flow_c3" sourceRef="catch_response" targetRef="end_client" />
  </bpmn:process>
  <bpmn:process id="process_server" name="服务端" isExecutable="true">
    <bpmn:startEvent id="start_server" name="收到请求">
      <bpmn:outgoing>flow_s1</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="msg_request" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="task_process" name="处理请求">
      <bpmn:incoming>flow_s1</bpmn:incoming>
      <bpmn:outgoing>flow_s2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="throw_response" name="发送响应">
      <bpmn:incoming>flow_s2</bpmn:incoming>
      <bpmn:outgoing>flow_s3</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="msg_response" />
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="end_server" name="结束">
      <bpmn:incoming>flow_s3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="flow_s1" sourceRef="start_server" targetRef="task_process" />
    <bpmn:sequenceFlow id="flow_s2" sourceRef="task_process" targetRef="throw_response" />
    <bpmn:sequenceFlow id="flow_s3" sourceRef="throw_response" targetRef="end_server" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_definitions_collab_msgflows" name="BPMNDiagram">
    <bpmndi:BPMNPlane id="BPMNPlane_definitions_collab_msgflows" bpmnElement="collaboration_1">
      <bpmndi:BPMNShape id="collaboration_1_di" bpmnElement="collaboration_1">
        <dc:Bounds x="12" y="12" width="425" height="391" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="pool_client_di" bpmnElement="pool_client" isHorizontal="true">
        <dc:Bounds x="0" y="0" width="425" height="207" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="start_client_di" bpmnElement="start_client">
        <dc:Bounds x="55" y="97" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="58" y="137" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_send_req_di" bpmnElement="task_send_req">
        <dc:Bounds x="111" y="75" width="100" height="80" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="111" y="75" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="catch_response_di" bpmnElement="catch_response">
        <dc:Bounds x="231" y="52" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="221" y="92" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_client_di" bpmnElement="end_client">
        <dc:Bounds x="307" y="52" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="310" y="92" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="pool_server_di" bpmnElement="pool_server" isHorizontal="true">
        <dc:Bounds x="0" y="207" width="425" height="184" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="start_server_di" bpmnElement="start_server">
        <dc:Bounds x="55" y="281" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="45" y="321" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_process_di" bpmnElement="task_process">
        <dc:Bounds x="131" y="259" width="100" height="80" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="131" y="259" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="throw_response_di" bpmnElement="throw_response">
        <dc:Bounds x="251" y="281" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="241" y="321" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_server_di" bpmnElement="end_server">
        <dc:Bounds x="327" y="275" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="330" y="315" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="flow_c1_di" bpmnElement="flow_c1">
        <di:waypoint x="91" y="115" />
        <di:waypoint x="111" y="115" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="flow_c2_di" bpmnElement="flow_c2">
        <di:waypoint x="211" y="101.66666666666667" />
        <di:waypoint x="221" y="101.66666666666667" />
        <di:waypoint x="221" y="76" />
        <di:waypoint x="231" y="76" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="flow_c3_di" bpmnElement="flow_c3">
        <di:waypoint x="267" y="70" />
        <di:waypoint x="307" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="flow_s1_di" bpmnElement="flow_s1">
        <di:waypoint x="91" y="299" />
        <di:waypoint x="131" y="299" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="flow_s2_di" bpmnElement="flow_s2">
        <di:waypoint x="231" y="299" />
        <di:waypoint x="251" y="299" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="flow_s3_di" bpmnElement="flow_s3">
        <di:waypoint x="287" y="293" />
        <di:waypoint x="327" y="293" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="msgflow_request_di" bpmnElement="msgflow_request">
        <di:waypoint x="161" y="155" />
        <di:waypoint x="161" y="218" />
        <di:waypoint x="73" y="218" />
        <di:waypoint x="73" y="281" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="92" y="201" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="msgflow_response_di" bpmnElement="msgflow_response">
        <di:waypoint x="269" y="281" />
        <di:waypoint x="249" y="88" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="234" y="167.5" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
